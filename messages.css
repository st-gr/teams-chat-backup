body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
  font-size: 14px;
  background-color: #ffffff;  /* Light background so the chat bubbles stand out */
  margin: 0;
  padding: 20px;
}

.message {
  display: block;   /* Changed from inline-block */
  width: fit-content;  /* Better than 'auto' for this use case */
  max-width: 60%;
  padding: 10px 15px;
  margin: 10px 0;
  border-radius: 10px;
  font-size: 14px;
  line-height: 1.4;
  position: relative;
  word-wrap: break-word;
  background-color: #f0f0f0;  /* Default background for left messages */
}

/* Left-side messages */
.message-left {
  background-color: #f0f0f0;  /* Explicit background for left messages */
}

/* Right-side messages */
.message-right {
  background-color: #e8ebfa;  /* Different background for right messages */
  margin-left: auto; 
}

/* Sender name in bold, just above the message text */
.message-sender {
  font-weight: bold;
  margin-bottom: 5px;
  color: #333;                /* Darker text color for contrast */
}

/* Timestamp in smaller, lighter text. 
   Remove float so it stacks neatly above/below or we can position it absolutely if we like. */
.message-timestamp {
  font-size: 11px;
  color: #999;
  margin-bottom: 4px;
  display: block;
}

/* Ensure paragraphs within the message body have standard spacing */
.message-body p {
  margin: 0;
  padding: 0;
}

img {
  max-width: 720px !important;
  height: auto !important;
}

.message-header {
  font-size: 12px;       /* Increased font size */
  color: gray;
  margin: 4px 0 -8px 0;    /* Reduced vertical spacing */
  /* Default alignment is left */
}

.header-right {
  text-align: right;     /* Align header content with right-aligned bubble */
}

.header-left {
  text-align: left;
}

.message-group {
  width: 100%;
  margin-bottom: 10px;
  display: flex;  /* Changed to flex */
  flex-direction: column;  /* Stack children vertically */
}

.group-right {
  align-items: flex-end;  /* Align children to the right */
}

.group-left {
  align-items: flex-start;  /* Align children to the left */
}

/* Remove these as they're no longer needed with flexbox */
.group-right .message,
.group-left .message {
  /* float: none; - Remove this */
  margin: 10px 0;
}

/* Simplify these as alignment is handled by flex container */
.group-right .message-header {
  width: 100%;
  text-align: right;
}

.group-left .message-header {
  width: 100%;
  text-align: left;
}

/* Collapsed group styles for subsequent bubbles */
.group-right-collapsed, .group-left-collapsed {
  margin-top: -26px;
}

/* Attachment "card" style */
.attachment {
  display: inline-block;
  background-color: #ffffff;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 10px;
  margin: 10px 0;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  position: relative;       /* Establish a positioning context */
  padding-left: 14px;       /* Add left padding to accommodate the line */
}

.attachment::before {
  content: "";
  position: absolute;
  top: 4px;
  bottom: 4px;
  left: 4px;
  width: 2px;
  background-color: #c7c7c7;
}

/* Now the attachment uses .message-sender, .message-timestamp, and .message-body defined above */

/* Attachment container inside the message bubble */
.attachment-container {
  margin-bottom: 0px;  /* Minimal gap between attachments and message body */
}

/* Use the same styling for attachment sender and timestamp as regular messages */
/* (If needed, override .attachment .attachment-sender and .attachment .attachment-timestamp here) */

/* New attachment header style */
.attachment-header {
  font-size: 11px;       /* Slightly smaller than regular message-header */
  color: gray;
  margin: -4px 0 4px 0;    /* Tighter vertical spacing; positioned a bit higher */
  text-align: left;
  /* Remove font-weight bold */
}

/* Reaction containers inside the message bubble */
.reaction-left {
  position: absolute;
  bottom: -23px;  /* half of the image height (20px/2) to overlap */
  left: 8px;
}

.reaction-right {
  position: absolute;
  bottom: -23px;
  right: 8px;
}

/* Scaled-down reaction image embedded in an oval */
.scaled-image {
  width: 20px;
  height: auto;
  object-fit: cover;
}

/* New style for reaction oval container */
.reaction-oval {
  width: 36px;
  height: 26px;
  border: 1px solid #ccc;
  border-radius: 42%;  /* Oval/circular container */
  background-color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

table[itemprop="copy-paste-table"] {
  border-collapse: collapse;
  font-size: 14px;
  background-color: #ffffff;
  width: auto;
}

table[itemprop="copy-paste-table"] td {
  border: 1px solid #ccc;
  padding: 2px 4px;
  vertical-align: middle;
  text-align: left;
}
